
// ----------------------------------------------------------------------------
// A SINGLE TASK
// ----------------------------------------------------------------------------

.drag-helper {
  position: absolute;
  min-height: 27px;
  min-width: 80px;
  line-height: 27px;
  padding: 5px 10px;
  background: rgba($white, 0.9);
  border: 1px solid $mid-grey;
  font-size: 14px;
  overflow: hidden;
}

.task {

  position: relative;
  list-style-type: none;

  font-size: 14px;
  line-height: 28px;
  color: #4c4c4c;
  background: $white;

  border: 1px $task-color solid;
  border-top: 0;
  border-left: 0;

  @include transition(margin 150ms ease);
  @include transform(translate3d(0, 0, 0));

  &.hidden {
    display: block;
    opacity: 0.4;
  }

  &:first-child {
    border-top: 1px solid $task-color;
  }

  // Vertical Stripes
  &:after {
    content: "";
    display: block;
    width: 2px;
    border-left: 1px solid $task-stripes;
    border-right: 1px solid $task-stripes;
    @include pos(0, auto, 0, 31px);
  }

  // Notes border
  &:before {
    display: block;
    content: "";
    @include pos(28px, 0, auto, 4px);
    height: 1px;
    background: $task-stripes;
    z-index: 200;
  }


  // Newly created tasks
  &.new {
    @include transform(none);
    @include animation(new-task 1 ease 150ms);
  }

  // Selected tasks
  &.selected {
    border-color: $light-blue;
    border-left-width: 1px;
    border-left-style: solid;
    box-shadow: 0 -1px $light-blue;
    background: mix($white, $light-blue, 92);

    // Adding the border offsets stuff a bit
    &::after {
      left: 30px;
    }
    .checkbox, .notes {
      border-left-width: 3px;
    }
    .checkbox {
      width: 27px;
    }
    .name, .input-name {
      left: 43px;
    }
  }
  &.selected:before {
    display: none;
  }





  // --------------------------------------------------------------------------
  // TAGS
  // --------------------------------------------------------------------------

  .tag {
    color: $dark-blue;
    cursor: pointer;
    @include transition(color 150ms ease);

    &:hover {
      text-decoration: underline;
    }
  }


  // --------------------------------------------------------------------------
  // PRIORITY
  // --------------------------------------------------------------------------

  .checkbox {
    display: inline-block;
    position: relative;
    top: -1px;
    width: 28px;
    height: 30px;
    margin-bottom: -11px;
    border-left: 4px solid $mid-grey;
    @include transition(border-color 150ms ease);
  }


  // --------------------------------------------------------------------------
  // CHECKBOX
  // --------------------------------------------------------------------------

  .checkbox:before {
    display: block;
    content: "";
    @include pos(9px, auto, auto, 8px);
    border: 1px $task-color solid;
    height: 10px;
    width: 10px;
  }


  // --------------------------------------------------------------------------
  // PRIORITY COLOURS
  // --------------------------------------------------------------------------

  &.p3 .checkbox,
  &.p3 .notes {
    border-left-color: $red;
  }

  &.p2 .checkbox,
  &.p2 .notes {
    border-left-color: $green;
  }

  &.p1 .checkbox,
  &.p1 .notes {
    border-left-color: $light-blue;
  }


  // --------------------------------------------------------------------------
  // NAME
  // --------------------------------------------------------------------------

  .name {
    line-height: 18px;
    @extend %ellipsis;
    @include pos(6px, 0, auto, 44px);
    @include transition(color 150ms ease);
  }

  .input-name {
    display: block;
    @include pos(0, 110px, auto, 35px);
    color: $dark-grey;
    border: none;
    outline: none;
    padding: 4px 0 4px 9px;
    line-height: 21px;
    cursor: text;
  }


  // --------------------------------------------------------------------------
  // RIGHT CONTROLS
  // --------------------------------------------------------------------------

  .right-controls {
    @include pos(0, 0, auto, auto);
    text-align: right;
    font-size: 0;
  }

  /*
  .delete {

    display: none;
    background: url("../img/trashcan_grey.png") 50% 50% no-repeat;
    width: 25px;
    height: 29px;
    padding: 0 5px;
    opacity: 1;
    @include transition(opacity 200ms ease);
    &:hover {
      opacity: 0.6;
    }
  }

  .priority-button {
    display: none;
    padding: 0 10px;
    height: 29px;
    vertical-align: top;
    border-left: 1px solid $task-color;
    border-right: 1px solid $task-color;
    .low, .medium, .high {
      display: inline-block;
      margin: 9px 2px 0;
      width: 9px;
      height: 9px;
      border: 1px solid rgba(black, 0.2);
      @include transition(border 100ms ease);
      &:hover {
        border: 1px solid rgba(black, 0.5);
      }
    }
    .low {
      background: $light-blue;
    }
    .medium {
      background: $green;
    }
    .high {
      background: $red;
    }
  }
 */

  // Date
  // This is so it shows up in the print styles
  img {
    vertical-align: top;
    padding: 9px 0;
    display: none;
  }

  time {
    font-size: 13px;
    padding: 0 10px;
    color: #999;
    &.soon {
      color: $dark-blue;
    }
    &.overdue, &.due {
      color: $red;
    }
  }

  /*
  .listName {
    font-size: 13px;
    padding-right: 10px;
    color: #999;
    background: url("../img/all_light.png") no-repeat 5px 50%;
    background-size: 12px 11px;
    padding-left: 25px;
  }
  */

  .date {
    height: 28px;
    line-height: 20px;
    display: none;
    vertical-align: top;
    font-size: 13px;
    color: #999999;
    padding: 0 5px 0 7px;
    background: white;
    border: 0;
    outline: 0;
    width: 80px;
  }


  // --------------------------------------------------------------------------
  // NOTES
  // --------------------------------------------------------------------------

  .notes {
    display: block;
    position: relative;
    background: $task-notes;
    line-height: 21px;
    padding: 0 5px 0 40px;
    height: 0px;
    width: 100%;
    outline: 0;
    max-height: 400px;
    overflow: auto;
    box-sizing: border-box;
    resize: none;

    // Priority
    border: 0;
    border-left: 4px solid $mid-grey;
    color: $dark-grey;

    @include transition(height 150ms ease);

    &.placeholder {
      color: $half-grey;
    }

  }

  // --------------------------------------------------------------------------
  // EXPANDED TASK
  // --------------------------------------------------------------------------

  &.expanded-task {
    border-top: 1px solid $task-color;
    &+ li {
      border-top: 1px solid $task-color;

      &.seperator {
        border-top: 0;
      }
    }

    // Show right buttons
    .date, img {
      display: inline-block;
    }
  }

  &.expanded {
    margin: 5px 0;
  }

  // --------------------------------------------------------------------------
  // COMPLETED TASK
  // --------------------------------------------------------------------------

  &.completed {

    // Display the checkmark icon
    .checkbox:after {
      content: "";
      width:  10px;
      height: 10px;
      @include pos(10px, auto, auto, 9px);
      background: url("../img/checkmark.png") no-repeat;
    }

    // Set priority color to grey
    .checkbox, .notes {
      border-left-color: $mid-grey;
    }

    // Dim text
    .name {
      color: $half-grey;
    }

    // Dim tags
    .tag {
      color: $dark-grey;
    }

    // Hide images?
    // img, time {
    //   display: none !important;
    // }

  }

}

